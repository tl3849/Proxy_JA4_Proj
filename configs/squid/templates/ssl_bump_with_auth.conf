# Basic settings
visible_hostname squid-poc
cache_mgr admin@example.com

# Network access
acl localnet src all
http_access allow localnet
http_access deny all

# SSL inspection settings
http_port 3128 ssl-bump \
  generate-host-certificates=on \
  dynamic_cert_mem_cache_size=4MB \
  cert=/etc/squid/squidCA.pem \
  key=/etc/squid/squidCA.key

# SSL bumping rules
acl step1 at_step SslBump1
ssl_bump peek step1
ssl_bump bump all

# SSL certificate generation
sslcrtd_program /usr/lib/squid/security_file_certgen -s /var/lib/ssl_db -M 4MB
sslcrtd_children 5

# Logging - Enable more verbose logs for debugging
debug_options ALL,1
cache_log /var/log/squid/cache.log
access_log daemon:/var/log/squid/access.log
